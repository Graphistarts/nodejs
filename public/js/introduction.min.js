$(document).ready(function(){function e(e){return'<div id="spoken_'+e+'" class="language-wrapper clearfix"><button type="button" class="delete">x</button> <div class="custom-select"> <select name="spoken-language" class="language" id="spoken-language">'+i+'</select></div> <div class="custom-select"> <select name="level" class="level"> <option value="4">4-Advanced</option><option value="5">5-Native</option> </select></div>'}function n(e){return'<div id="learning_'+e+'" class="language-wrapper clearfix"><button type="button" class="delete">x</button> <div class="custom-select"> <select class="language">'+i+'</select></div> <div class="custom-select"> <select name="level" class="level"><option value="1">1 - Beginner</option> <option value="2">2 - Elementary</option> <option value="3"> 3 - Intermediate</option> </select> </div>'}function a(e,n,a,l){this.id=e,this.language=n,this.abbr=a,this.level=l}var l=$("body"),t=0,s=0,i=$("#spoken_0 .language").html(),o=[],r=[],u=new a(t,null,null,"5");u.id="spoken_"+t,o.push(u);var g=new a(s,null,null,"1");g.id="learning_"+s,r.push(g),$(".helper .marker").on("click",function(e){$(".helper .content").toggleClass("show")}),$(".add-spoken-language").on("click",function(n){n.preventDefault(),t++;var l=new a(t,null,null,"4");l.id="spoken_"+t,o.push(l),$(".add-spoken-language").before(e(t))}),$(".spoken-language").on("click",".delete",function(e){e.preventDefault(),$(this).parent().remove();for(var n=o.length-1;n>=0;n--)$(this).parents().attr("id")==o[n].id&&o.splice(n)}),l.on("change",".spoken-language .language",function(){for(var e=o.length-1;e>=0;e--)o[e].id==$(this).parents().parents().attr("id")&&(o[e].abbr=$(this).val(),o[e].language=$(this).find(":selected").text())}),l.on("change",".spoken-language .level",function(){for(var e=o.length-1;e>=0;e--)o[e].id==$(this).parents().parents().attr("id")&&(o[e].level=$(this).val())}),$(".add-learning-language").on("click",function(e){e.preventDefault(),s++;var l=new a(s,null,null,"1");l.id="learning_"+s,r.push(l),$(".add-learning-language").before(n(s))}),$(".learning-language").on("click",".delete",function(e){e.preventDefault(),$(this).parent().remove();for(var n=r.length-1;n>=0;n--)$(this).parents().attr("id")==r[n].id&&r.splice(n)}),l.on("change",".learning-language .language",function(){for(var e=r.length-1;e>=0;e--)r[e].id==$(this).parents().parents().attr("id")&&(r[e].abbr=$(this).val(),r[e].language=$(this).find(":selected").text())}),l.on("change",".learning-language .level",function(){for(var e=r.length-1;e>=0;e--)r[e].id==$(this).parents().parents().attr("id")&&(r[e].level=$(this).val());console.log(r)}),$(".submit").on("click",function(e){e.preventDefault();var n={spoken:o,learning:r},a="";return $("#spoken_0 .language option:selected").is(":disabled")&&(a+="<p>Please select a native language</p>"),$("#learning_0 .language option:selected").is(":disabled")&&(a+="<p>Please select at least one learning language</p>"),""!=a?($(".error").html(a),$(".error").addClass("active"),!1):void $.ajax({url:"/user-languages",type:"post",data:n,success:function(e){window.location.href="/home"}})})});